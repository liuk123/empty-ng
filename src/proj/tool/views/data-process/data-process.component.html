<div class="m-container page-top">
  <div nz-row [nzGutter]="16">
    <div nz-col nzXs="24" nzSm="24" nzMd="16" nzLg="16">
      <h3>输入</h3>
      <textarea class="inputArea" rows="8" nz-input [(ngModel)]="inputValue" #inputEl></textarea>

      <h3>输出</h3>
      <textarea class="inputArea" rows="8" nz-input [(ngModel)]="resultValue"></textarea>
      <div class="mt-3 mb-3">
        <button (click)="copy(resultValue)">复制</button>
      </div>
    </div>
    <div nz-col nzXs="24" nzSm="24" nzMd="8" nzLg="8">
      <div>可F12查看每步的执行结果</div>
      <div [formGroup]="validateForm">
        <div formArrayName="processList">
          <div class="flex mb-2" *ngFor="let item of processList.controls; let i=index">
            <div style="flex: 1 1 auto;" [formGroupName]="i">
              <nz-select formControlName="value" (ngModelChange)="setInputValue(i)" style="width: 150px;">
                <nz-option *ngFor="let p of processOption" [nzValue]="p" [nzLabel]="p.name"></nz-option>
              </nz-select>
              <div>
                描述：{{processList?.value[i]?.value?.desc}} <br/>
                输入格式：{{processList?.value[i]?.value?.paramsType}}，
                输出格式：{{processList?.value[i]?.value?.returnType}}
              </div>
              <textarea #textarea *ngIf="processList?.value[i]?.value?.inputStr" nz-input formControlName="inputStr" placeholder="Controlled autosize" [nzAutosize]="{ minRows: 3, maxRows: 5 }"></textarea>
              <textarea #textarea *ngIf="processList?.value[i]?.value?.fnBody" nz-input formControlName="fnBody" placeholder="Controlled autosize" [nzAutosize]="{ minRows: 3, maxRows: 5 }"></textarea>
            </div>

            <button nz-button nzType="primary" nz-popconfirm nzPopconfirmTitle="确定删除分类吗?" nzPopconfirmPlacement="bottom"
              (nzOnConfirm)="removeItem(i)">删除</button>
          </div>
        </div>
      </div>
      <button nz-button nzType="primary" (click)="addItem()">添加</button>
      <button nz-button nzType="primary" (click)="run()">执行</button>
    </div>
  </div>
</div>