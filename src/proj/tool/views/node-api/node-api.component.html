<div class="m-container page-top">

    <div class="info-panel">
      <h1>nodejs应用 AI在线工具</h1>
      <p>百度AI自然语言处理，AI工具</p>
      <p>部分功能收费，请登录账号，购买金币，按次数收费</p>
    </div>
    <div class="grid">
      <div class="column-lf">
        <div class="sticky">
          <app-menu-tree [data]="categoryTree" (ckEvent)="selectNav($event)" children="children"></app-menu-tree>
        </div>
      </div>
      <div class="column-rt">
        <h2 class="process-title" #title>{{selOptionItem.title}}</h2>
        <div class="form-item mb-3" *ngFor="let formItem of selOptionItem.formData" [ngSwitch]="formItem.type" [formGroup]="validateForm">
          <label class="mr-1">{{formItem.label}}</label>
          <textarea *ngSwitchCase="'textarea'" nz-input [formControlName]="formItem.code" [nzAutosize]="{ minRows: 5 }"  placeholder="请输入"></textarea>
          <nz-input-number *ngSwitchCase="'number'" [nzStep]="10" [formControlName]="formItem.code"  placeholder="请输入"></nz-input-number>
          <nz-select
            *ngSwitchCase="'select'"
            [formControlName]="formItem.code"
            [nzMode]="'default'"
            style="min-width: 8em;"
            nzAllowClear
            nzShowSearch
            placeholder="请选择">
            <nz-option *ngFor="let opt of formItem.option" [nzValue]="opt.value" [nzLabel]="opt.name">
            </nz-option>
          </nz-select>
          <ng-container *ngSwitchCase="'files'">
            <app-simple-upload
              accept=".pdf,.jpg,.jpeg,.png,.gif"
              [formControlName]="formItem.code"></app-simple-upload>
              <ul role='list' class="file-list">
                <li class="file-item" *ngFor="let item of validateForm?.get(formItem.code)?.value??[]; let i = index; trackBy: trackByItem">
                  <div class="file-info">
                    <div class="file-name">{{item.name}}</div>
                    <img [src]="item|fn:getSafeUrl" class="file-img" [alt]="item.name">
                  </div>
                </li>
              </ul>
          </ng-container>
          <input *ngSwitchDefault nz-input [formControlName]="formItem.code" placeholder="请输入">
        </div>
        <button nz-button nzBlock nzType="primary" (click)="run()" class="mb-1">执行</button>
        <div class="line"></div>
        <h3>输出</h3>
        <textarea class="inputArea" rows="8" nz-input [(ngModel)]="resultValue"></textarea>
        <div class="mt-3 mb-3">
          <button nz-button nzType="primary" (click)="copy(resultValue)" class="mt-1 mr-1">复制</button>
          <button nz-button nzType="default" (click)="clear()" class="mt-1 mr-1">清空</button>
        </div>
      </div>
    </div>

</div>