<div style="display: flex;position: relative;" class="page-top">
  <div class="sidebar">
    <ul>
      <li *ngFor="let item of compLibData" class="flex">
        {{item.title}}
        <span class="fill-space"></span>
        <span class="text-btn" (click)="showAddCompDialog(item)">添加</span>
      </li>
    </ul>
  </div>
  <div class="middle-container">
    <!-- 提供空白区域-放大缩小时防止溢出 -->
    <div class="view-container">
      <!-- 动态创建组件的主体 -->
      <div #viewContainer class="view-main"
        [style.width.px]="viewInfo.width"
        [style.height.px]="viewInfo.height"
        [style.transform]="'scale('+viewInfo.scale+')'"
      >
        <!-- 六条基准线 -->
        <app-mark-line [curComp]="activeCompData" [siblingComp]="siblingCompData"></app-mark-line>
      </div>
    </div>
    <div class="view-btn-group">
      <span class="dy-info">{{viewInfo.scale}}</span>
      <button nz-button type="button" nzType="text" nzSize="small" (click)="scale(.1)">放大</button>
      <button nz-button type="button" nzType="text" nzSize="small" (click)="scale(-.1)">缩小</button>
      
      <button nz-button type="button" nzType="text" nzSize="small" (click)="saveLocalStorage()">暂存</button>
      <button nz-button type="button" nzType="text" nzSize="small" (click)="getLastLocalData()">获取上次保存</button>
      <button nz-button type="button" nzType="text" nzSize="small" (click)="preview()">全部显示</button>
      <button nz-button type="button" nzType="text" nzSize="small" (click)="clearViews()">清空</button>
      <button nz-button type="button" nzType="text" nzSize="small" (click)="exportViews()">导出配置</button>
    </div>
  </div>
  <div class="opt-container">
    <div class="item">
      <strong>🔹视图组件：</strong>
      <span *ngFor="let item of selectedCompTreeData">{{item?.title}}</span>
    </div>
    <div class="item">
      <strong>🔹激活组件：</strong>
      <span>{{activeCompData?.title}}({{contentIndex}})</span>
    </div>
    <div class="item">
      <strong>🔹组件树</strong>
      <app-nodes-tree
        [data]="[compTreeData]"
        children="children"
        (ckEvent)="setActiveComp($event)"
        [menuDown]="menuDown"
        (optCkEvent)="optCk($event)"></app-nodes-tree>
    </div>
    <div class="item">
      <strong>🔹组件数据</strong>
      <h4>input</h4>
      <div>
        {{activeCompData?.inputs|json}}
      </div>
      <h4>output</h4>
      <div>
        {{activeCompData?.outputs|json}}
      </div>
      <h4>event</h4>
      <div>
        {{activeCompData?.events|json}}
      </div>
    </div>
  </div>
</div>